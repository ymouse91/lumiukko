<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	  		<!-- iOS PWA -liput -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- Yleinen v√§riteema (safari, android ym.) -->
<meta name="theme-color" content="#60A5FA">

<!-- Web manifesti (nimi voi olla my√∂s manifest.json, jos niin olet tehnyt) -->
<link rel="manifest" href="manifest.json">

<!-- iOS:lle pit√§√§ olla erikseen apple-touch-icon -->
<link rel="apple-touch-icon" sizes="192x192" href="./hsb.png">
    <title>Lumiukko</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;-webkit-user-select:none;-webkit-touch-callout:none;}
        body{
            font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;
            min-height:100vh;background:linear-gradient(135deg,#407eea,#663ba2);padding:10px;
        }
        .game-container{
            background:white;border-radius:15px;padding:20px;box-shadow:0 10px 40px rgba(0,0,0,0.3);
            max-width:600px;width:100%;
        }

        .info{text-align:center;color:#666;margin-bottom:20px;font-size:14px;}

h1{
  margin: 0; font-size: 1.6rem; font-weight: 700; text-align:center;margin-bottom:10px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
}

        .puzzle-selector{text-align:center;margin-bottom:20px;}
        .puzzle-selector select{
            padding:8px;border-radius:20px;border:2px solid #ddd;margin-right:10px;font-size:18px;
        }
        .puzzle-selector button{
            padding:10px 16px;background:#667eea;color:white;border:none;border-radius:20px;font-weight:bold;
        }

        .board{
            display:inline-grid;grid-template-columns:repeat(5,1fr);
            gap:12px;padding:20px;background:#f0f0f0;border-radius:10px;width:100%;margin-bottom:20px;
        }
        .cell{
            aspect-ratio:1;border:2px solid #ddd;border-radius:10px;display:flex;align-items:center;
            justify-content:center;font-size:48px;cursor:grab;background:white;transition:0.2s;
            position:relative;touch-action:none;overflow:hidden;
        }
        .cell img{width:85%;height:85%;object-fit:contain;pointer-events:none;}
        .cell.empty{cursor:default;}
        .cell.tree{background:#90EE90;cursor:default;}

        .cell.selected{border:3px solid #6b6bff;box-shadow:0 0 15px #6b6bff;transform:scale(1.05);}

        .controls{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-bottom:15px;}
        button{padding:12px 24px;border-radius:20px;font-weight:bold;border:none;cursor:pointer; font-size: 18px;margin-bottom:10px;}
        .btn-reset{background:#ff6b6b;color:white;}
        .btn-undo{background:#90EE90;color:black;}
        .btn-hint{background:#ffd93d;}

        .status{
            text-align:center;padding:15px;margin-bottom:15px;background:#f0f0f0;
            border-radius:8px;font-weight:bold;min-height:50px;display:flex;
            align-items:center;justify-content:center;color:#333;
        }
        .status.success{background:#90EE90;color:#155724;font-size:18px;}
		
		.status.lumiukko{background:#ffd93d;color:#155724;font-size:18px;}

        .stats{text-align:center;color:#666;font-size:14px;margin-top:15px;}
		
				/* iPhone (kaikki mallit, pysty + vaaka) */
@media only screen 
  and (max-device-width: 430px)
  and (-webkit-min-device-pixel-ratio: 2)
  and (orientation: portrait),
only screen 
  and (max-device-width: 430px)
  and (-webkit-min-device-pixel-ratio: 2)
  and (orientation: landscape) {

    :root {
        --cell: 42px;   /* s√§√§d√§ haluamasi mitat */
    }

    .game-container {
        padding: 10px;
    }

    .board {
        gap: 2px;
        padding: 4px;
    }
}
  /* ‚Äî‚Äî iPad (kaikki mallit) VAaka-asento ‚Äî‚Äî */
@media only screen 
    and (min-device-width: 768px)
    and (max-device-width: 1366px)
    and (orientation: landscape)
    and (-webkit-min-device-pixel-ratio: 2) {

    html, body {
        height: 100dvh;            /* k√§yt√§ koko n√§yt√∂n korkeus */
        overflow: hidden;          /* ei scrollausta */
    }

    .game-container {
        transform: scale(0.88);    /* ‚Üì pienennet√§√§n koko UI sopimaan ruutuun */
        transform-origin: top center;
        margin-top: calc(env(safe-area-inset-top) + 60px);
        margin-bottom: calc(env(safe-area-inset-bottom) + 5px);
    }

    /* pienennet√§√§n v√§lej√§ */
    .board {
        padding: 10px;
        gap: 8px;
    }



    .status {
        padding: 10px;
        min-height: 40px;
        font-size: 14px;
    }

    .stats {
        font-size: 13px;
        margin-top: 8px;
    }
}
    </style>
</head>
<body>
<div class="game-container">
    <h1 id="title">‚õÑ LUMIUKKO ‚õÑ</h1>

    <div class="puzzle-selector">
        <label for="levelSelect" style="display:none">Taso:</label>
        <select id="levelSelect">
            <option value="starter">Aloittelija</option>
            <option value="junior" selected>Juniori</option>
            <option value="expert">Asiantuntija</option>
            <option value="master">Mestari</option>
            <option value="wizard">Velho</option>
        </select>
        <button id="randomButton">Uusi pulma</button>
    </div>

    <div class="status" id="status">Liu'uta pallo sinne mihin haluat</div>
    <div class="board" id="board"></div>

    <div class="controls">
        <button class="btn-reset" onclick="game.reset()">‚ü≥ Alusta</button>
        <button class="btn-undo" onclick="game.undo()">‚Ü∂ Peruuta</button>
        <button class="btn-hint" onclick="game.hint()" style="display:none">üí° Vihje</button>

        <!-- ‚≠ê PYYSIT YHDEN AINOAN NAPIN ‚Üí T√ÑSS√Ñ SE ON -->
        <button class="btn-hint" onclick="game.showSolution()">‚ñ∂ Ratkaisu</button>
    </div>

    <div class="stats">Siirrot: <strong id="moves">0</strong></div>
</div>

<script>
class SnowProblemGame {

    constructor(puzzleString) {
        this.parseBoard(puzzleString);
        this.history = [];
        this.moves = 0;
        this.selected = null;
        this.allPuzzles = [];
        this.currentPuzzleData = null;
        this.lastPuzzleId = null;
        this.render();
        this.setupEventListeners();
        this.loadPuzzles();
        this.setupRandomButton();
		this.setupLevelChange();
    }

    randomMirror(grid) {
        const modes=["none","h","v","hv"];
        const mode=modes[Math.floor(Math.random()*4)];
        let lines=grid.trim().split("\n");
        if(mode==="h"||mode==="hv")lines=lines.map(l=>[...l].reverse().join(""));
        if(mode==="v"||mode==="hv")lines=[...lines].reverse();
        return lines.join("\n");
    }

    loadPuzzles() {
        fetch("lumipallot-pulmia.json")
            .then(r=>r.json())
            .then(data=>{
                this.allPuzzles=data;
                this.updateStatus("Pulmat ladattu!");
                this.autoStartPuzzle();
            })
            .catch(_=>console.log("Pulmatiedostoa ei l√∂ytynyt"));
    }

    autoStartPuzzle() {
        const level=document.getElementById("levelSelect").value;
        const p=this.getRandomPuzzleForLevel(level);
        if(!p)return;
        const g=this.randomMirror(p.grid);

        this.currentPuzzleData=p;
        this.parseBoard(g);
        this.history=[];
        this.moves=0;
        this.selected=null;
        this.render();
        this.updateStatus(`Pulma: ${p.name}`);
    }

    getRandomPuzzleForLevel(level){
        const list=this.allPuzzles.filter(p=>p.level===level);
        if(!list.length)return null;

        let cand=null;
        do{
            cand=list[Math.floor(Math.random()*list.length)];
        }while(cand.id===this.lastPuzzleId);

        this.lastPuzzleId=cand.id;
        return cand;
    }

    setupRandomButton(){
        document.getElementById("randomButton").onclick=()=>{
            const level=document.getElementById("levelSelect").value;
            const p=this.getRandomPuzzleForLevel(level);
            if(!p){this.updateStatus("Ei pulmia t√§lt√§ tasolta");return;}

            let grid=this.randomMirror(p.grid);
            this.currentPuzzleData=p;
            this.parseBoard(grid);
            this.history=[];
            this.moves=0;
            this.selected=null;
            this.render();
            this.updateStatus(`Pulma: ${p.name}`);
        };
    }

setupLevelChange(){
    document.getElementById("levelSelect").addEventListener("change", ()=>{
        this.autoStartPuzzle(); // arvo heti uusi kentt√§ valitulta tasolta
    });
}

    parseBoard(str){
        const lines=str.trim().split("\n");
        this.rows=lines.length;
        this.cols=lines[0].length;
        this.board=lines.map(l=>l.split(""));
        this.initial=this.board.map(r=>[...r]);
    }

    reset(){
        this.board=this.initial.map(r=>[...r]);
        this.history=[];
        this.moves=0;
        this.selected=null;
        this.render();

        const name = this.currentPuzzleData?.name || "(tuntematon)";
        const id   = this.currentPuzzleData?.id ?? "";
        this.updateStatus(`Pulma: ${name} nollattu`);
    }


    undo(){
        if(!this.history.length)return;
        const prev=this.history.pop();
        this.board=prev.board;
        this.moves=prev.moves;
        this.selected=null;
        this.render();
        this.updateStatus("Siirto peruttu");
    }

    saveHistory(){
        this.history.push({board:this.board.map(r=>[...r]),moves:this.moves});
    }

    isValid(r,c){return r>=0&&r<this.rows&&c>=0&&c<this.cols;}
    getCell(r,c){return this.isValid(r,c)?this.board[r][c]:null;}
    setCell(r,c,v){if(this.isValid(r,c))this.board[r][c]=v;}

canMove(r,c,dr,dc){
    const v=this.getCell(r,c);

    // Vain b ja s saavat liikkua (ei bs eik√§ bsh eik√§ h)
    if(v!=="b" && v!=="s") return false;

    let nr=r+dr,nc=c+dc;
    while(this.isValid(nr,nc)){
        const t=this.getCell(nr,nc);

        // pys√§htyy esteeseen tai muuhun palikkaan
        if(t==="k" || t!=="o"){
            const sr=nr-dr, sc=nc-dc;
            return this.isValid(sr,sc) && this.getCell(sr,sc)==="o" && !(sr===r && sc===c);
        }

        nr+=dr; nc+=dc;
    }
    return false;
}


    move(r,c,dr,dc){
        if(!this.canMove(r,c,dr,dc))return false;
        this.saveHistory();
        const v=this.getCell(r,c);
        let nr=r+dr,nc=c+dc;
        while(this.isValid(nr,nc)){
            const t=this.getCell(nr,nc);
            if(t==="k"||t!=="o"){nr-=dr;nc-=dc;break;}
            nr+=dr;nc+=dc;
        }
        this.setCell(r,c,"o");
        this.setCell(nr,nc,v);
        this.moves++;
        this.selected=null;
        this.render();

        return true;
    }

    stack(fr,fc,tr,tc){
        const A=this.getCell(fr,fc),B=this.getCell(tr,tc);
        if(Math.abs(fr-tr)+Math.abs(fc-tc)!==1){
            this.updateStatus("Osat vierekk√§in!");
            return false;
        }
        if(A==="s"&&B==="b"){
            this.saveHistory();
            this.setCell(fr,fc,"o");
            this.setCell(tr,tc,"bs");
            this.moves++;
            this.selected=null;
            this.render();
            return true;
        }
        if(A==="h"&&B==="bs"){
            this.saveHistory();
            this.setCell(fr,fc,"o");
            this.setCell(tr,tc,"bsh");
            this.moves++;
            this.selected=null;
            this.render();
            this.updateStatus("‚õÑ Lumiukko valmis!");
			 // ‚≠ê T√ÑM√Ñ KORJAA ONGELMAN: pulma valmis vasta kun kaikki ukot koottu
            if (this.checkWin()) {
               this.updateStatus("üéâ Pulma ratkaistu!");
            }

            return true;
        }
        this.updateStatus("V√§√§r√§ osayhdistelm√§");
        return false;
    }

    checkWin(){
        for(let r=0;r<this.rows;r++)
            for(let c=0;c<this.cols;c++){
                const v=this.getCell(r,c);
                if(v!=="o"&&v!=="k"&&v!=="bsh")return false;
            }
        return true;
    }

    hint(){this.updateStatus("üí° Liu'uta palloja esteisiin.");}

    updateStatus(msg){
        const s=document.getElementById("status");
        s.textContent=msg;
		s.classList.toggle("lumiukko",msg.includes("‚õÑ"));
        s.classList.toggle("success",msg.includes("üéâ"));

    }

    render(){
        const board=document.getElementById("board");
        board.innerHTML="";
        for(let r=0;r<this.rows;r++){
            for(let c=0;c<this.cols;c++){
                const cell=document.createElement("div");
                const v=this.getCell(r,c);
                cell.className="cell";
                cell.dataset.r=r;
                cell.dataset.c=c;

                if(v==="o")cell.classList.add("empty");
                if(v==="k")cell.classList.add("tree");
                if(v==="h")cell.classList.add("head");

                if(this.selected&&this.selected[0]===r&&this.selected[1]===c)
                    cell.classList.add("selected");

                if(v==="b"){
                    let i=document.createElement("img");i.src="base.png";cell.appendChild(i);
                }else if(v==="s"){
                    let i=document.createElement("img");i.src="s.png";cell.appendChild(i);
                }else if(v==="h"){
                    let i=document.createElement("img");i.src="head.png";cell.appendChild(i);
                }else if(v==="bs"){
                    let i=document.createElement("img");i.src="sb.png";cell.appendChild(i);
                }else if(v==="bsh"){
                    let i=document.createElement("img");i.src="hsb.png";cell.appendChild(i);
                }else if(v==="k"){
                    cell.textContent="üå≤";
                }

                cell.onclick=()=>this.handleClick(r,c);
                board.appendChild(cell);
            }
        }
        document.getElementById("moves").textContent=this.moves;
    }

handleClick(r,c){
    const v=this.getCell(r,c);
    if(v==="o"||v==="k")return;

    const locked = (v==="bs" || v==="bsh");

    // Est√§ lukitun valinta aloituspalan rooliin,
    // mutta salli lukittu kohteena, jos jokin pala on jo valittuna.
    if(locked && !this.selected) return;

    if(this.selected){
        const[sr,sc]=this.selected;
        this.selected=null;
        this.stack(sr,sc,r,c);
        this.render();
        return;
    }

    this.selected=[r,c];
    this.render();
}


    setupEventListeners(){
        const b=document.getElementById("board");
        b.addEventListener("mousedown",e=>this.handleMouseDown(e));
        b.addEventListener("touchstart",e=>this.handleTouchStart(e));
    }

handleMouseDown(e){
    const cell=e.target.closest(".cell");
    if(!cell)return;

    const r=+cell.dataset.r,c=+cell.dataset.c,v=this.getCell(r,c);

    const locked = (v==="bs" || v==="bsh");
    if(locked && !this.selected) return;   // est√§ aloitus lukitusta, mutta salli kohde valinnalle

    if(v==="o"||v==="k")return;

    this.dragStart={r,c,startX:e.clientX,startY:e.clientY,moved:false};

    const move=ev=>{
        if(!this.dragStart)return;
        const dx=ev.clientX-this.dragStart.startX;
        const dy=ev.clientY-this.dragStart.startY;
        if(Math.abs(dx)>30||Math.abs(dy)>30){
            this.dragStart.moved=true;
            let dr=0,dc=0;
            if(Math.abs(dx)>Math.abs(dy))dc=dx>0?1:-1;
            else dr=dy>0?1:-1;
            this.move(this.dragStart.r,this.dragStart.c,dr,dc);
            this.dragStart=null;
            document.removeEventListener("mousemove",move);
            document.removeEventListener("mouseup",up);
        }
    };

    const up=()=>{
        if(this.dragStart&&!this.dragStart.moved){
            if(this.selected){
                const[sr,sc]=this.selected;
                this.selected=null;
                this.stack(sr,sc,this.dragStart.r,this.dragStart.c);
                this.render();
            }else{
                this.selected=[this.dragStart.r,this.dragStart.c];
                this.render();
            }
        }
        this.dragStart=null;
        document.removeEventListener("mousemove",move);
        document.removeEventListener("mouseup",up);
    };

    document.addEventListener("mousemove",move);
    document.addEventListener("mouseup",up);
}


handleTouchStart(e){
    const cell=e.target.closest(".cell");
    if(!cell)return;
    e.preventDefault();

    const r=+cell.dataset.r,c=+cell.dataset.c,v=this.getCell(r,c);

    const locked = (v==="bs" || v==="bsh");
    if(locked && !this.selected) return;   // est√§ aloitus lukitusta, mutta salli kohde valinnalle

    if(v==="o"||v==="k")return;

    this.dragStart={r,c,startX:e.touches[0].clientX,startY:e.touches[0].clientY,moved:false};

    const move=ev=>{
        if(!this.dragStart)return;
        const dx=ev.touches[0].clientX-this.dragStart.startX;
        const dy=ev.touches[0].clientY-this.dragStart.startY;
        if(Math.abs(dx)>30||Math.abs(dy)>30){
            this.dragStart.moved=true;
            let dr=0,dc=0;
            if(Math.abs(dx)>Math.abs(dy))dc=dx>0?1:-1;
            else dr=dy>0?1:-1;
            this.move(this.dragStart.r,this.dragStart.c,dr,dc);
            this.dragStart=null;
            document.removeEventListener("touchmove",move);
            document.removeEventListener("touchend",up);
        }
    };

    const up=()=>{
        if(this.dragStart&&!this.dragStart.moved){
            if(this.selected){
                const[sr,sc]=this.selected;
                this.selected=null;
                this.stack(sr,sc,this.dragStart.r,this.dragStart.c);
                this.render();
            }else{
                this.selected=[this.dragStart.r,this.dragStart.c];
                this.render();
            }
        }
        this.dragStart=null;
        document.removeEventListener("touchmove",move);
        document.removeEventListener("touchend",up);
    };

    document.addEventListener("touchmove",move,{passive:false});
    document.addEventListener("touchend",up);
}



}

/* ============================================================
     ‚≠ê SIMULAATTORI + SOLVERI + SHOWSOLUTION
============================================================ */

class SnowSim {
    static clone(b){return b.map(r=>[...r]);}
    static key(b){return b.map(r=>r.join("")).join("|");}
    static isValid(b,r,c){return r>=0&&r<b.length&&c>=0&&c<b[0].length;}
    static get(b,r,c){return this.isValid(b,r,c)?b[r][c]:null;}
    static set(b,r,c,v){if(this.isValid(b,r,c))b[r][c]=v;}


    static move(b,r,c,dr,dc){
        const v = this.get(b,r,c);

        // vain b ja s saavat liikkua (ei bs, bsh, h)
        if(v!=="b" && v!=="s") return null;

        let nr=r+dr, nc=c+dc;
        while(this.isValid(b,nr,nc)){
            const t=this.get(b,nr,nc);
            if(t==="k" || t!=="o"){
                nr-=dr; nc-=dc;
                break;
            }
            nr+=dr; nc+=dc;
        }

        // ei oikeaa liikett√§
        if(nr===r && nc===c) return null;

        const nb=this.clone(b);
        this.set(nb,r,c,"o");
        this.set(nb,nr,nc,v);
        return nb;
    }

    static stack(b,fr,fc,tr,tc){
        const A=this.get(b,fr,fc),B=this.get(b,tr,tc);

        if(Math.abs(fr-tr)+Math.abs(fc-tc)!==1)return null;

        if(A==="s"&&B==="b"){
            let nb=this.clone(b);
            this.set(nb,fr,fc,"o");
            this.set(nb,tr,tc,"bs");
            return nb;
        }

        if(A==="h"&&B==="bs"){
            let nb=this.clone(b);
            this.set(nb,fr,fc,"o");
            this.set(nb,tr,tc,"bsh");
            return nb;
        }
        return null;
    }

    static isWin(b){
        for(let r=0;r<b.length;r++)
            for(let c=0;c<b[0].length;c++){
                const v=b[r][c];
                if(v!=="o"&&v!=="k"&&v!=="bsh")return false;
            }
        return true;
    }
}

SnowProblemGame.prototype.solver=function(){

    const start=SnowSim.clone(this.board);
    if(SnowSim.isWin(start))return [];

    const Q=[{b:start,moves:[]}];
    const seen=new Set([SnowSim.key(start)]);

    const dirs=[
        {dr:1,dc:0,name:"‚Üì"},
        {dr:-1,dc:0,name:"‚Üë"},
        {dr:0,dc:1,name:"‚Üí"},
        {dr:0,dc:-1,name:"‚Üê"}
    ];

    while(Q.length){
        const node=Q.shift();
        const b=node.b, moves=node.moves;

        /* PINONTA */
        for(let r=0;r<this.rows;r++){
            for(let c=0;c<this.cols;c++){
                const A=SnowSim.get(b,r,c);
                if(A==="s"||A==="h"){
                    const neigh=[[1,0],[-1,0],[0,1],[0,-1]];
                    for(const[dr,dc] of neigh){
                        const nr=r+dr,nc=c+dc;
                        const nb=SnowSim.stack(b,r,c,nr,nc);
                        if(!nb)continue;

                        const key=SnowSim.key(nb);
                        if(seen.has(key))continue;

                        if(SnowSim.isWin(nb))return [...moves,`PIN ${r},${c}‚Üí${nr},${nc}`];

                        seen.add(key);
                        Q.push({b:nb,moves:[...moves,`PIN ${r},${c}‚Üí${nr},${nc}`]});
                    }
                }
            }
        }

        /* LIIKKEET (vain b ja s) */
        for(let r=0;r<this.rows;r++){
            for(let c=0;c<this.cols;c++){
                const A=SnowSim.get(b,r,c);
                if(A!=="b"&&A!=="s")continue;

                for(const d of dirs){
                    const nb=SnowSim.move(b,r,c,d.dr,d.dc);
                    if(!nb)continue;

                    const key=SnowSim.key(nb);
                    if(seen.has(key))continue;

                    if(SnowSim.isWin(nb))
                        return [...moves,`MOVE ${A} ${d.name} ${r},${c}`];

                    seen.add(key);
                    Q.push({b:nb,moves:[...moves,`MOVE ${A} ${d.name} ${r},${c}`]});
                }
            }
        }
    }

    return null;
};

/* ============================================================
        ‚≠ê ASKEL-ASKELTA N√ÑYTETT√ÑV√Ñ RATKAISU
============================================================ */

SnowProblemGame.prototype.showSolution=function(){

    const sol=this.solver();

    if(sol===null){
        this.updateStatus("‚ùå Ratkaisua ei l√∂ydy t√§lle asetelmalle.");
        return;
    }
    if(!sol.length){
        this.updateStatus("‚úÖ Kentt√§ on jo ratkaistu.");
        return;
    }

    let i=0;
    const step=()=>{

        if(i>=sol.length)return;

        const m=sol[i];

        if(m.startsWith("MOVE")){
            const parts=m.split(" ");
            const A=parts[1], dir=parts[2];
            const rc=parts[3].split(",");
            const r=+rc[0], c=+rc[1];

            let dr=0,dc=0;
            if(dir==="‚Üë")dr=-1;
            if(dir==="‚Üì")dr=1;
            if(dir==="‚Üê")dc=-1;
            if(dir==="‚Üí")dc=1;

            this.move(r,c,dr,dc);
        }

        if(m.startsWith("PIN")){
            const p=m.match(/PIN (\d+),(\d+)‚Üí(\d+),(\d+)/);
            this.stack(+p[1],+p[2],+p[3],+p[4]);
        }

        i++;
        setTimeout(step,700);
    };

    step();
};

/* ============================================================
      K√§ynnist√§ peli
============================================================ */
const game=new SnowProblemGame(`ooooo
ooooo
ooooo
ooooo`);


/* SERVICE WORKER */
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker
      .register('./service-worker.js')
      .catch(err => console.warn('Service workerin rekister√∂inti ep√§onnistui:', err));
  });
}

</script>

<!-- QR Koodi yms‚Ä¶ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

<style>
  #qrOverlay{
    position:fixed;inset:0;display:none;align-items:center;justify-content:center;
    background:rgba(0,0,0,.6);z-index:999;
  }
  #qrBox{
    background:#fff;padding:16px 20px;border-radius:12px;text-align:center;
    box-shadow:0 0 20px rgba(0,0,0,.4);
  }
  #qrBox canvas{width:180px;height:180px;}
</style>

<div id="qrOverlay">
  <div id="qrBox">
    <canvas id="qr"></canvas>
    <p>ymouse91.github.io/lumiukko/</p>
  </div>
</div>

<script>
const qr=new QRious({
  element:document.getElementById('qr'),
  value:'https://ymouse91.github.io/lumiukko/',
  size:180
});
const overlay=document.getElementById('qrOverlay');
document.getElementById('title').onclick=()=>overlay.style.display='flex';
overlay.onclick=()=>overlay.style.display='none';
</script>

</body>
</html>
